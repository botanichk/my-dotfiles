#!/bin/bash

# Цвета
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
CYAN='\033[0;36m'
BRIGHT_MAGENTA='\033[1;35m'
RED='\033[0;31m'
NC='\033[0m' # Сброс

# Персональная информация от Marsik'а
name="Марсик"
age="вечно молодой"
job="терминальный хранитель"
location="на шкафу"
hobbies=("охота на курсоры" "ищу рыбов" "прятки" "мяуканье в терминал")
quotes=(
    "Мяу — значит 'я здесь, и я в засаде'."
    "Во тьме ночной,при свете дня.Tux не пройдет мимо меня."
    "ммяяяяяуууууууу"
    "Мыши у вас не вкусные"
)
random_quote=${quotes[$RANDOM % ${#quotes[@]}]}

# Информация о системе
get_system_info() {
    system_info=()
    system_info+=("$(echo -e ${CYAN}╭─ Дедушка:${NC} $(whoami)@$(hostname))")
    system_info+=("$(echo -e ${GREEN}├─ ОС:${NC} $(grep '^PRETTY_NAME' /etc/os-release | cut -d= -f2 | tr -d '\"'))")
    system_info+=("$(echo -e ${YELLOW}├─ Ядро:${NC} $(uname -r))")
    system_info+=("$(echo -e ${BLUE}├─ Аптайм:${NC} $(uptime -p | sed 's/up //'))")
    system_info+=("$(echo -e ${RED}╰─ Память:${NC} $(free -m | awk '/^Mem/ {print $3 "M / " $2 "M"}'))")

    for line in "${system_info[@]}"; do
        echo -e "$line"
    done
}

# ASCII-арт Marsik'а
print_art() {
    cat << "EOF"
    /\___/\
    )     (
   =\     /=
     )   (
    /     \
    )     (
   /       \
   \       /
    \__ __/
       ))
      //
     ((
      \)
EOF
}

# Персональная информация
print_personal_info() {
    personal_info=()
    personal_info+=("$(echo -e ${GREEN}╭─ Имя:${NC} ${name})")
    personal_info+=("$(echo -e ${YELLOW}├─ Возраст:${NC} ${age})")
    personal_info+=("$(echo -e ${BLUE}├─ Роль:${NC} ${job})")
    personal_info+=("$(echo -e ${CYAN}├─ Локация:${NC} ${location})")
    personal_info+=("$(echo -e ${BRIGHT_MAGENTA}├─ Хобби:${NC} ${hobbies[@]})")
    personal_info+=("$(echo -e ${RED}╰─ Цитата дня:${NC} ${random_quote})")

    for line in "${personal_info[@]}"; do
        echo -e "$line"
    done
}

# Вывод
print_combined_block() {
    art_lines=()
    while IFS= read -r line; do
        art_lines+=("$line")
    done < <(print_art)

    info_lines=()
    while IFS= read -r line; do
        info_lines+=("$line")
    done < <(get_system_info)

    info_lines+=("")
    while IFS= read -r line; do
        info_lines+=("$line")
    done < <(print_personal_info)

    max_lines=$(( ${#art_lines[@]} > ${#info_lines[@]} ? ${#art_lines[@]} : ${#info_lines[@]} ))
    for ((i = 0; i < max_lines; i++)); do
        art="${art_lines[i]:-}"
        info="${info_lines[i]:-}"
        printf "%-20s %s\n" "$art" "$info"
    done
}

# Запуск
print_combined_block

